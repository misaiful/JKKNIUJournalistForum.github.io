<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>নজরুল বিশ্ববিদ্যালয় সাংবাদিক ফোরাম</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+Bengali&display=swap" rel="stylesheet">
  <style>
    body {
      margin: 0;
      font-family: 'Noto Serif Bengali', sans-serif;
      background: linear-gradient(to bottom, #f5f7fa, #c3cfe2);
      color: #333;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      padding: 0 20px;
    }

    header {
      text-align: center;
      margin-top: 40px;
    }

    header img {
      width: 80px;
      height: 80px;
      object-fit: contain;
      margin-bottom: 15px;
    }

    header h1 {
      margin: 0;
      font-size: 2em;
      font-weight: 700;
      color: #0070f3;
    }

    header p {
      margin-top: 10px;
      font-size: 1em;
      color: #555;
      max-width: 600px;
    }

    main {
      margin-top: 30px;
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 100%;
      max-width: 500px;
    }

    canvas {
      margin-top: 20px;
      border-radius: 20px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.3);
      max-width: 100%;
      background: white;
      transition: transform 0.3s;
    }

    canvas:hover {
      transform: scale(1.02);
    }

    input[type=file], input[type=range], button {
      width: 100%;
      margin-top: 15px;
    }

    input[type=file] {
      padding: 10px;
      border-radius: 10px;
      border: 1px solid #ccc;
      background: #fff;
      cursor: pointer;
    }

    input[type=range] {
      -webkit-appearance: none;
      height: 8px;
      border-radius: 5px;
      background: #ddd;
      outline: none;
      transition: 0.3s;
    }

    input[type=range]::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: #0070f3;
      cursor: pointer;
      box-shadow: 0 2px 6px rgba(0,0,0,0.3);
      transition: 0.3s;
    }

    input[type=range]:active::-webkit-slider-thumb {
      transform: scale(1.2);
    }

    button {
      padding: 12px 20px;
      font-size: 1em;
      border: none;
      border-radius: 12px;
      background: #0070f3;
      color: white;
      cursor: pointer;
      box-shadow: 0 6px 15px rgba(0,0,0,0.2);
      transition: 0.3s;
    }

    button:hover {
      background: #0059c1;
      transform: translateY(-2px);
    }

    footer {
      margin-top: 50px;
      color: #666;
      font-size: 0.9em;
      text-align: center;
      max-width: 600px;
    }

    @media (max-width: 600px) {
      header h1 { font-size: 1.6em; }
      header p { font-size: 0.95em; }
    }
  </style>
</head>
<body>
  <header>
    <img src="logo.png" alt="Logo"> <!-- Replace with your logo -->
    <h1>সত্যের পথে, সাহসের ডাকে, শিক্ষার্থীদের পক্ষে ৩য় বর্ষে যাত্রা</h1>
    <p>Upload your photo, adjust it, and add our custom frame. Download your new photo and share it with friends!</p>
  </header>

  <main>
    <input type="file" id="upload" accept="image/*">
    <label for="zoom">Zoom:</label>
    <input type="range" id="zoom" min="1" max="3" step="0.01" value="1">
    <canvas id="canvas"></canvas>
    <button id="downloadBtn" style="display:none;">ডাউনলোড করুন</button>
  </main>

  <footer>
    &copy; Created by Aniruddha Sajjad
  </footer>

  <script>
const upload = document.getElementById("upload");
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
const downloadBtn = document.getElementById("downloadBtn");
const zoomSlider = document.getElementById("zoom");

let uploadedImg = null;
let frame = new Image();
frame.src = "frame.png"; // Your frame file
let scale = 1;

// For drag movement
let offsetX = 0;
let offsetY = 0;
let isDragging = false;
let startX, startY;

function drawImage() {
  if (!uploadedImg) return;

  const size = Math.min(uploadedImg.width, uploadedImg.height);
  canvas.width = size;
  canvas.height = size;

  const sx = ((uploadedImg.width - size / scale) / 2) - offsetX;
  const sy = ((uploadedImg.height - size / scale) / 2) - offsetY;
  const drawSize = size;

  ctx.clearRect(0, 0, canvas.width, canvas.height);
  ctx.drawImage(
    uploadedImg,
    sx, sy,
    size / scale,
    size / scale,
    0, 0,
    drawSize,
    drawSize
  );

  if (frame.complete) {
    ctx.drawImage(frame, 0, 0, canvas.width, canvas.height);
  } else {
    frame.onload = () => {
      ctx.drawImage(frame, 0, 0, canvas.width, canvas.height);
    };
  }
}

// Handle file upload
upload.addEventListener("change", (e) => {
  const file = e.target.files[0];
  if (!file) return;

  const reader = new FileReader();
  reader.onload = function(event) {
    const img = new Image();
    img.onload = function() {
      uploadedImg = img;
      offsetX = 0;
      offsetY = 0;
      drawImage();
      downloadBtn.style.display = "inline-block";
    };
    img.src = event.target.result;
  };
  reader.readAsDataURL(file);
});

// Zoom slider
zoomSlider.addEventListener("input", (e) => {
  scale = parseFloat(e.target.value);
  drawImage();
});

// Mouse events for dragging
canvas.addEventListener("mousedown", (e) => {
  isDragging = true;
  startX = e.offsetX;
  startY = e.offsetY;
});

canvas.addEventListener("mousemove", (e) => {
  if (!isDragging) return;
  const dx = (e.offsetX - startX) / scale;
  const dy = (e.offsetY - startY) / scale;
  offsetX -= dx;
  offsetY -= dy;
  startX = e.offsetX;
  startY = e.offsetY;
  drawImage();
});

canvas.addEventListener("mouseup", () => { isDragging = false; });
canvas.addEventListener("mouseleave", () => { isDragging = false; });

// Touch events for mobile drag
canvas.addEventListener("touchstart", (e) => {
  isDragging = true;
  const touch = e.touches[0];
  startX = touch.clientX - canvas.getBoundingClientRect().left;
  startY = touch.clientY - canvas.getBoundingClientRect().top;
});

canvas.addEventListener("touchmove", (e) => {
  if (!isDragging) return;
  e.preventDefault();
  const touch = e.touches[0];
  const currentX = touch.clientX - canvas.getBoundingClientRect().left;
  const currentY = touch.clientY - canvas.getBoundingClientRect().top;
  const dx = (currentX - startX) / scale;
  const dy = (currentY - startY) / scale;
  offsetX -= dx;
  offsetY -= dy;
  startX = currentX;
  startY = currentY;
  drawImage();
});

canvas.addEventListener("touchend", () => { isDragging = false; });
canvas.addEventListener("touchcancel", () => { isDragging = false; });

// Download button
downloadBtn.addEventListener("click", () => {
  const link = document.createElement("a");
  link.download = "framed-photo.png";
  link.href = canvas.toDataURL("image/png");
  link.click();
});
</script>

</body>
</html>
